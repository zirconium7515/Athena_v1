Athena v1 - Synology NAS (Docker) 24/7 배포 가이드이 문서는 Athena_v1 프로젝트를 Synology NAS의 Docker 환경에서 24시간 안정적으로 구동하기 위한 단계별 가이드입니다.최종 목표:벡엔드 (Python): Gunicorn 서버로 24/7 실행 (athena-backend 컨테이너)프론트엔드 (React): Nginx 서버로 24/7 서비스 (athena-frontend 컨테이너)접속: http://[NAS-IP-주소]:80801단계: Synology NAS 설정 (최초 1회)패키지 센터 열기: Synology DSM에 로그인합니다.Docker 설치: '패키지 센터'에서 Docker를 검색하여 설치합니다.SSH 활성화:제어판 > 터미널 및 SNMP > 터미널 탭으로 이동합니다.SSH 서비스 활성화를 체크하고, 포트 번호(기본값 22)를 확인합니다.적용을 누릅니다.2단계: 프로젝트 빌드 (PC에서 1회)NAS에 업로드하기 전, PC에서 React(프론트엔드)를 '빌드(Build)'하여 build 폴더를 생성해야 합니다.PC의 VS Code에서 Athena_v1/frontend 폴더로 이동합니다.cd frontend
npm install이 되어 있는지 확인합니다. (안 되어 있다면 npm install 실행)프론트엔드 빌드: 터미널에 다음 명령어를 입력합니다.npm run build
Athena_v1/frontend 폴더 안에 build 폴더가 생성되었는지 확인합니다.3단계: 프로젝트 업로드 (PC -> NAS)File Station 열기: Synology DSM에서 'File Station'을 엽니다.폴더 생성: docker 공유 폴더 안에 athena_v1이라는 새 폴더를 생성합니다. (경로: /docker/athena_v1)파일 업로드: Athena_v1 프로젝트 폴더의 모든 파일 (방금 생성된 frontend/build 폴더 포함, node_modules 제외)을 /docker/athena_v1 폴더로 복사(업로드)합니다./docker/athena_v1/ (NAS 경로)ai_trader/ (폴더)frontend/ (폴더 - build 폴더 포함)docker-compose.yml (파일)Dockerfile (파일)nginx.conf (파일)requirements.txt (파일)main.py (파일)... (기타 모든 .py 및 .md 파일)4단계: Docker 실행 (SSH 터미널)SSH 접속: PC의 터미널(VS Code, PowerShell 등)에서 NAS로 SSH 접속을 시도합니다. (NAS 관리자 계정 사용)ssh [NAS-관리자-ID]@[NAS-IP-주소]
Root 권한 획득: 접속 성공 후, 다음 명령어를 입력하고 관리자 비밀번호를 한 번 더 입력합니다.sudo -i
프로젝트 폴더로 이동: docker-compose.yml 파일이 있는 위치로 이동합니다.cd /volume1/docker/athena_v1
(참고: 경로는 사용자에 따라 /volume2/docker/...일 수 있습니다.)Docker Compose 실행 (빌드 및 시작):다음 명령어를 입력하면, Docker가 Dockerfile과 docker-compose.yml을 읽어 '벡엔드'와 '프론트엔드' 컨테이너 2개를 자동으로 빌드하고 백그라운드에서 실행합니다. (최초 실행 시 5~10분 소요될 수 있습니다.)docker-compose up -d --build
5단계: 실행 확인로그 확인 (실시간): docker-compose up 명령어를 실행한 터미널에서, 다음 명령어를 입력하여 벡엔드/프론트엔드 로그를 실시간으로 확인할 수 있습니다.docker-compose logs -f
(중지: Ctrl + C)브라우저 접속: PC의 웹 브라우저에서 다음 주소로 접속합니다.http://[NAS-IP-주소]:8080NAS의 8080 포트로 접속하면, React(프론트엔드) 화면이 보이고, 벡엔드 로그가 docker-compose logs -f 터미널에 출력되기 시작하면 성공입니다.6. (참고) 중지 및 업데이트 방법24/7 중지: SSH 터미널에서 docker-compose.yml이 있는 폴더로 이동 후, 다음 명령어를 입력합니다.docker-compose down
코드 업데이트:docker-compose down으로 봇을 중지합니다.File Station을 이용해 PC에서 수정한 *.py 또는 frontend/build 폴더를 NAS로 덮어쓰기(업로드)합니다.docker-compose up -d --build를 다시 실행하면, Docker가 변경된 부분만 새로 빌드하여 재시작합니다.